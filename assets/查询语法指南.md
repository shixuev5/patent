# 专利检索系统查询语法指南 (Patent Retrieval Syntax Guide)

## 1. 基础检索规则 (Basic Rules)

### 1.1 字符串与特殊字符
*   **引号 (`""`)**: 用于精确匹配包含特殊字符（如 `/`, `:`, `,`, `-`）的词，或将保留字（如 `AND`, `OR`, `3D`）作为普通文本检索。
    *   示例: `"X-RAY"`, `"VITAMIN W "D"`, `"3D"`
*   **分号 (`;`)**: 用于在一行中分割两个连续执行的命令。
    *   示例: `VIDEO;1 AND CAMERA?;1 AND GAME?`
*   **非空检查**: 使用 `CT=YES` 检索指定字段内容不为空的记录。

### 1.2 截词符/通配符 (Truncation/Wildcards)
用于模糊匹配单词的变体。

| 符号 | 名称 | 含义 | 示例 | 匹配说明 |
| :--- | :--- | :--- | :--- | :--- |
| **`+`** | 无限截断 | 匹配 **0个或任意多个** 字符 | `DRILL+` | Drill, Drills, Drilling... |
| **`?`** | 限制截断 | 匹配 **0个或1个** 字符 (或指定数量) | `GAME?` | Game, Games (不含 Gaming) |
| **`#`** | 强制占位 | 强制匹配 **正好1个** 字符 | `FUZ#Y` | Fuzzy (不匹配 Fuzy) |

*   **位置支持**: 支持左截断 (`+FLUOR+`)、中间截断 (`??CENTRALI#ED`) 和嵌入截断 (`HEX?FLU##ACETYL+`)。
*   **自动添加**: 在 `PN` (专利号), `AN` (申请号), `PR` (优先权号), `AP` (申请人) 字段检索时，关键词后会自动添加 `+`。

---

## 2. 逻辑运算符 (Boolean Operators)

| 运算符 | 含义 | 说明 |
| :--- | :--- | :--- |
| **`AND`** | 与 | 包含第一项 **且** 包含第二项 |
| **`OR`** | 或 | 包含第一项 **或** 包含第二项，或两者都有 |
| **`NOT`** | 非 | 包含第一项 **但排除** 包含第二项 |
| **`XOR`** | 异或 | 包含第一项 **或** 第二项，但 **不允许两者同时出现** |

*   **前置模式**: 为了避免重复输入运算符，可将运算符放在前面，用逗号分隔检索词。
    *   示例: `OR HERBIC+, FUNGIC+, PESTIC+` 等同于 `HERBIC+ OR FUNGIC+ OR PESTIC+`

---

## 3. 邻近运算符 (Proximity Operators)

用于规定两个检索词之间的距离和顺序。**注意：停用词（Stopwords）在计算距离时会被计入。**

### 3.1 词序相关 (Order Matters)
要求检索词按输入顺序出现。

*   **`nW`** (Word): 两个词之间最多间隔 `n` 个单词。
    *   `W` (即 `0W`): 紧邻，顺序固定。
    *   示例: `VITAMIN W B` (Vitamin B)
*   **`=nW`**: 两个词之间 **正好** 间隔 `n` 个单词。
    *   示例: `AIR =5W PUMP?`

### 3.2 词序无关 (Unordered)
两个词可以任意顺序出现。

*   **`nD`** (Distance): 两个词之间最多间隔 `n` 个单词。
    *   `D` (即 `0D`): 紧邻，顺序不限。
    *   示例: `DRIL+ D MACHINE?` (Drill Machine 或 Machine Drill)
*   **`=nD`**: 两个词之间 **正好** 间隔 `n` 个单词。
    *   示例: `CAMERA =2D LENS?`

---

## 4. 范围与层级限定符 (Scope Operators)

用于限定两个检索词必须出现在同一结构层级中。

| 运算符 | 否定形式 | 含义 | 层级范围 |
| :--- | :--- | :--- | :--- |
| **`F`** | **`NOTF`** | Same **Field** | 同一字段 (如 Title) |
| **`P`** / **`L`** | **`NOTP`** / **`NOTL`** | Same **Paragraph** | 同一段落 (对 CSETS 字段为同一组) |
| **`S`** | **`NOTS`** | Same **Sentence** | 同一句子 |

*   **逻辑**: `A (NOT)F B` 表示 A 出现，且 B (不)出现在同一字段中。
*   **层级关系**: `F` (最大) > `P` > `S` (最小)。

---

## 5. 关系与数值运算符 (Relational Operators)

用于日期、数字或字典序比较。

*   **运算符**: `=`, `<`, `>`, `<=`, `>=`
*   **日期格式**: `yyyy-mm-dd` (分隔符可用 `-`, `.`, `/`).
    *   支持截断: `PD<=85` (1985年前), `PD>=94-10-30`.
*   **范围运算符 (`:`)**:
    *   数字: `2:5` 等同于 `2 OR 3 OR 4 OR 5`。
    *   分类号: `/EC H04N5/225:H04N5/232` (检索该范围内的分类号)。

---

## 6. 字段与索引限定 (Fields & Indexing)

### 6.1 前缀与后缀
*   **前缀**: `TAG/Term` (例如 `CANON/PA`)
*   **后缀**: `Term/TAG` (例如 `TRAP?/ABS`)
*   **混合**: `Term/TAG1/TAG2` (多字段检索，例如 `CORK/AB/TI`)
*   **默认**: 如果没有指定，默认在基本索引 (Basic Index, BI) 中检索。
*   **优先级**: 后缀比前缀优先。如果前缀未被后缀覆盖，前缀生效。

### 6.2 常用字段简写示例
*   `/TI` (Title), `/AB` (Abstract), `/CL` (Claims), `/PA` (Patent Assignee), `/PN` (Patent Number), `/PD` (Publication Date).

---

## 7. 运算符优先级 (Operator Precedence)

当一个查询包含多个运算符时，遵循以下层级（Level）规则。
**重要规则**: 层级 `n` 的运算符必须包含在层级 `m` 的运算符之内 (其中 n <= m)。

1.  **Level 0 (最高结合力)**: `W`, `D` (邻近)
2.  **Level 1**: `S` (句子)
3.  **Level 2**: `P`, `L`, `NOTL` (段落)
4.  **Level 3**: `F` (字段)
5.  **Level 4**: `NOTF`, `NOTP`, `NOTS` (反向限定)
6.  **Level 5**: `AND`, `NOT`
7.  **Level 无**: `OR` (可与任何组合)

*   **冲突规则**:
    *   同级运算符若用 `/` 分隔（如 AND/NOT, P/L），可以在同一语句中使用。
    *   同级运算符若用 `-` 分隔（如 NOTF-NOTP-NOTS），**不**可以在同一语句中使用。

---

## 8. 相对引用与历史命令 (Relative Referencing)

用于引用之前的检索步骤或结果集。

*   **`*` (星号)**: 代表“最后/最近”的一项。
*   **`*n`**: 相对引用。
    *   `*1`: 倒数第二项 (Last - 1)。
    *   `*2`: 倒数第三项。
    *   **注意**: `*0` 是无效的。
*   **示例**:
    *   `*1 AND *5`: 将倒数第2个结果集与倒数第6个结果集进行 AND 操作。
    *   `..LI SS *2`: 列出倒数第3个步骤的结果。

---

## 9. 综合示例 (Representative Examples)

**场景 1: 复杂的化学或医药检索**
> 查找标题或摘要中包含 "Hepatitis" 且在该段落中不包含 "Viral" 的记录。
```text
HEPATITIS/TI/AB NOTP VIRAL
```

**场景 2: 精确短语与距离控制**
> 查找 "Electric" 和 "Vehicle" 出现在同一句子中，且中间相隔不超过 3 个单词，顺序不限。
```text
ELECTRIC 3D VEHICLE
```

**场景 3: 排除特定内容的组合**
> 查找涉及 "Solar" 或 "Wind" 的能源技术，但排除 "Turbine"。
```text
(SOLAR OR WIND) NOT TURBINE
```

**场景 4: 范围检索**
> 查找 1994 年 1 月到 1994 年 8 月之间公开的专利。
```text
PD=9401:9408
```

**场景 5: 多种拼写变体的精确控制**
> 查找 "Color" 或 "Colour"，使用通配符。
```text
COLOU?R
```
*(注: `?` 匹配0或1个字符，这里匹配 U 或 空)*

**场景 6: 分类号范围检索**
> 检索 EC 分类号在 H04N5/225 到 H04N5/232 之间的记录。
```text
/EC H04N5/225:H04N5/232
```